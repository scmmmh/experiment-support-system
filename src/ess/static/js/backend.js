!function(t){function a(t,a){for(var e=[],n=0;n<a.length;n++)a[n]>=0&&a[n]<t.length&&e.push(t[a[n]]);return e}function e(t){for(var a=0;a<t.length;a++)"#"!=t[a][0]&&(t[a]="#"+t[a]);return t}var n={init:function(n){return this.each(function(){var i=t(this),r={};if(i.data("chart-labels")&&(r.labels=i.data("chart-labels")),i.data("chart-data")){var o={data:i.data("chart-data")};i.data("chart-title")&&(o.label=i.data("chart-title")),i.data("chart-colors")?o.backgroundColor=i.data("chart-colors"):i.data("chart-color-idxs")&&n.colors?o.backgroundColor=e(a(n.colors,i.data("chart-color-idxs"))):o.backgroundColor=e(palette(["qualitative"],i.data("chart-data").length)),r.datasets=[o]}var s={legend:{display:!i.data("chart-hide-legend")}};"horizontalBar"==i.data("chart-type")&&(s.scales={xAxes:[{ticks:{beginAtZero:!0}}],yAxes:[{ticks:{mirror:!0}}]}),new Chart(i,{type:i.data("chart-type"),data:r,options:s})})}};t.fn.chart=function(a){return n[a]?n[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist on jQuery.chart"):n.init.apply(this,arguments)}}(jQuery),function(t){var a={init:function(a){return this.each(function(){var e=t(this);e.on("click","a[data-action=edit]",function(a){a.preventDefault();var e=t(this),n=e.parents(".editable-container");n.removeClass("previewing").addClass("editing"),setTimeout(function(){t(window).scrollTop(n.offset().top)},50)}),e.on("click","a[data-action=cancel]",function(a){a.preventDefault();var e=t(this),n=e.parents(".editable-container");n.removeClass("editing").addClass("previewing"),n.find("form")[0].reset()}),e.on("click","a[data-action=save]",function(a){a.preventDefault();var e=t(this),n=e.parents(".editable-container");n.find("form").trigger("submit")}),e.on("submit","form",function(a){a.preventDefault();var e=t(this);e.find(".is-invalid-label").removeClass("is-invalid-label"),e.find(".is-invalid-input").removeClass("is-invalid-input"),e.find("span.form-error.is-visible").removeClass("is-visible");var n=t.ajax(e.attr("action"),{method:"POST",data:e.serialize()});n.then(function(a){if("ok"==a.status){var n=e.parents(".editable-container");n.removeClass("editing").addClass("previewing"),n.find(".preview").empty().append(t(a.fragment).children())}else for(key in a.errors){var i=e.find("*[name="+key+"]"),r=i.parents("label"),o=r.find("span.form-error");0===o.length&&(o=t('<span class="form-error"></span>'),r.append(o)),r.addClass("is-invalid-label"),i.addClass("is-invalid-input"),o.addClass("is-visible"),o.html(a.errors[key])}})}),e.on("click","a[data-action=add-row]",function(a){a.preventDefault();var e=t(this),n=e.parent().parent(),i=n.clone();i.find("a[data-action=add-row]").attr("data-action","remove-row").addClass("alert").removeClass("success"),i.find(".mdi").html("remove"),i.find("input").each(function(){var a=t(this);a.val(""),a.removeClass("hidden")}),n.find("input").each(function(){var a=t(this),e=parseInt(/[0-9]+/.exec(a.attr("name"))[[0]])+1;a.attr("name",a.attr("name").replace(/[0-9]+/,e))}),n.before(i)}),e.on("click","a[data-action=remove-row]",function(a){a.preventDefault(),t(this).parent().parent().remove()}),a.reorder&&(e.on("click","a[data-action=reorder]",function(t){t.preventDefault()}),e.sortable({handle:"a[data-action=reorder]",containment:"parent",tolerance:"pointer",update:function(){var e=[];t("article").children("div").each(function(){e.push(t(this).data("item-id"))}),t.ajax(a.reorder,{method:"POST",data:t.param({csrf_token:a.csrf_token,item:e},!0)})}}))})}};t.fn.inlineEditor=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.inlineEditor"):a.init.apply(this,arguments)}}(jQuery),function(t){var a={init:function(a){return this.each(function(){var a=t(this);a.on("click",function(e){e.preventDefault();var n=a.data("ess-confirm");if(n){var i='<div id="confirm-modal" class="reveal" data-reveal=""><h2>'+(n.title||"Please confirm")+"</h2><p>"+n.msg+'</p><div class="text-right">';n.cancel&&(i=i+'<a href="#" class="button cancel '+(n.cancel.class_||"")+'">'+(n.cancel.label||"Cancel")+"</a>&nbsp;"),n.ok&&(i=i+'<a href="#" class="button ok '+(n.ok.class_||"")+'">'+(n.ok.label||"Ok")+"</a>"),i+="</div></div>";var r=t(i);t("body").append(r);var o=new Foundation.Reveal(r);r.find("a.cancel").on("click",function(t){t.preventDefault(),o.close()}),r.find("a.ok").on("click",function(e){e.preventDefault();var n=t('<form action="'+a.attr("href")+'" method="post"></form>');t("body").append(n),n.submit()}),t(document).on("closed.zf.reveal",function(){r.remove()}),o.open()}else{var s=t('<form action="'+a.attr("href")+'" method="post"></form>');t("body").append(s),s.submit()}})})}};t.fn.postLink=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.postLink"):a.init.apply(this,arguments)}}(jQuery),function(t){var a={init:function(a){return this.each(function(){var a=t(this);t(window).on("resize",function(){a.sidebar("update")}).on("scroll",function(){a.sidebar("update")})}).sidebar("update")},update:function(){var a=t(this),e=t(window).innerHeight(),n=0;a.parent().siblings("header").each(function(){n+=t(this).outerHeight(!0)});var i=t(window).scrollTop();i<n?(e=e-n+i,t("#sidebar").css("position","").css("height",e+"px")):t("#sidebar").css("position","fixed").css("top","0px").css("height",e+"px")}};t.fn.sidebar=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.sidebar"):a.init.apply(this,arguments)}}(jQuery);