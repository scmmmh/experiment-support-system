<!DOCTYPE html>
<html xmlns:py="http://genshi.edgewall.org/" py:strip="True">
  <head py:match="head">
    <title>${select('title/text()')}</title>
    <link rel="stylesheet" type="text/css" href="${r.static_url('pyquest:static/css/screen.css')}"/>
    <link rel="stylesheet" type="text/css" href="${r.static_url('pyquest:static/css/backend.css')}"/>
    <link rel="stylesheet" type="text/css" href="${r.static_url('pyquest:static/css/frontend.css')}"/>
    <link rel="stylesheet" type="text/css" href="${r.static_url('pyquest:static/css/buttons/screen.css')}"/>
    <link rel="stylesheet" type="text/css" href="${r.static_url('pyquest:static/css/themes/basic.css')}"/>
    ${select('style')}
    <script type="text/javascript" src="${r.static_url('pyquest:static/js/jquery-1.7.1.min.js')}"></script>
    <script type="text/javascript" src="${r.static_url('pyquest:static/js/jquery-ui-1.8.17.min.js')}"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $('.question.ranking ul select').hide();
        $('.question.ranking ul').sortable({
            update: function(e, ui) {
                var items = $(this).sortable('toArray');
                for(var idx in items) {
                    console.log('#' + items[idx].replace('_', '.').replace(/\./g, '\\.'));
                    $('#' + items[idx].replace('_', '.').replace(/\./g, '\\.')).val(idx);
                }
            }
        });
    });
    </script>
    ${select('script')}
  </head>
  <body py:match="body">
    <article class="survey">
      ${select('*')}
    </article>
  </body>
</html>