<!DOCTYPE html>
<html xmlns:py="http://genshi.edgewall.org/" xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="../layout/frontend.html"/>
  <head>
    <title>${survey.title} - ${qsheet.title}</title>
  </head>
  <body>
    <py:if test="survey.status == 'testing'"> 
      ${h.ui.survey_breadcrumbs([(survey.title, {'href': r.route_url('survey.view', sid=survey.id)}), ('Test', {'href': r.route_url('survey.run', sid=survey.id)})], r)}
      <div class="error"><div style="padding:0 1em 0.5em 0;" class="left"><img src="${r.static_url('pyquest:static/img/testing.png')}" alt="testing"/></div>This survey is currently being tested and is not live yet.
        Answers will be validated and recored as when the survey is live, but will be wiped automatically at the end of
        the test. Testers will also be able to complete the survey multiple times.</div>
    </py:if>
    <hgroup>
      <h1>${survey.title}</h1>
    </hgroup>
    <section class="qsheet">
      <hgroup>
        <h1>${qsheet.title}</h1>
      </hgroup>
      <p class="error" py:if="r.method == 'POST' and e">Please answer all required questions.</p>
      <form action="${r.route_url('survey.run', sid=survey.id, qsid=qsheet.id)}" method="post">
        <py:for each="data_item in data_items">
          ${h.qsheet.display(data_item, qsheet.content, e, csrf_token=r.session.get_csrf_token())}
        </py:for>
        <ul class="buttons">
          <li py:if="'more' in submit_options">${h.form.submit('More', name='action_', class_='button')}</li>
          <li py:if="'next' in submit_options">${h.form.submit('Next', name='action_', class_='button')}</li>
          <li py:if="'finish' in submit_options">${h.form.submit('Finish', name='action_', class_='button')}</li>
        </ul>
      </form>
    </section>
  </body>
</html>